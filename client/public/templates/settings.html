<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JHUB Africa - Settings</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Reusing styles from dashboard with additions */
        :root {
            --primary-color: #003399;
            --secondary-color: #0055ff;
            --accent-color: #00d084;
            --light-bg: #f4f5f6;
            --dark-text: #000a1f;
            --danger-color: #e63946;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light-bg);
            color: var(--dark-text);
        }
        
        /* Navigation - Same as dashboard */
        .navbar {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo img {
            height: 40px;
        }
        
        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
            align-items: center;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark-text);
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .nav-links a:hover {
            color: var(--primary-color);
        }
        
        .nav-links a.active {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .user-menu {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }
        
        /* Dashboard Layout */
        .dashboard-container {
            display: flex;
            min-height: calc(100vh - 70px);
        }
        
        .sidebar {
            width: 250px;
            background-color: white;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin-top: 30px;
        }
        
        .sidebar-menu li {
            margin-bottom: 10px;
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            border-radius: 8px;
            text-decoration: none;
            color: var(--dark-text);
            transition: all 0.3s ease;
        }
        
        .sidebar-menu a:hover, .sidebar-menu a.active {
            background-color: var(--light-bg);
            color: var(--primary-color);
        }
        
        .sidebar-menu a i {
            width: 20px;
            text-align: center;
        }
        
        .main-content {
            flex: 1;
            padding: 30px;
            background-color: var(--light-bg);
        }
        
        /* Settings Specific Styles */
        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .settings-header h1 {
            margin: 0;
            color: var(--primary-color);
            font-size: 1.8rem;
        }
        
        .settings-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 30px;
        }
        
        .settings-tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .settings-tab.active {
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .settings-tab:hover:not(.active) {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .settings-section {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .section-title {
            margin-top: 0;
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            font-size: 1.1rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: inherit;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="password"]:focus,
        input[type="tel"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(0, 85, 255, 0.1);
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
        }
        
        .btn {
            padding: 12px 20px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-family: inherit;
            font-size: 1rem;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #002266;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background-color: rgba(0, 51, 153, 0.1);
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c1121f;
        }
        
        .avatar-upload {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .avatar-preview {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #eee;
            overflow: hidden;
            position: relative;
        }
        
        .avatar-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .avatar-upload-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .btn-sm {
            padding: 8px 15px;
            font-size: 0.9rem;
        }
        
        .security-device {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 6px;
            margin-bottom: 15px;
        }
        
        .device-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .device-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
        }
        
        .device-meta {
            font-size: 0.9rem;
            color: #666;
        }
        
        .current-device {
            background-color: rgba(0, 208, 132, 0.1);
            border-color: var(--accent-color);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                width: 200px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                padding: 15px;
            }
            
            .sidebar-menu {
                display: flex;
                overflow-x: auto;
                margin-top: 15px;
                padding-bottom: 10px;
            }
            
            .sidebar-menu li {
                margin-bottom: 0;
                margin-right: 10px;
            }
            
            .sidebar-menu a {
                white-space: nowrap;
            }
            
            .nav-links {
                display: none;
            }
            
            .settings-tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">
            <img src="images/logo.png" alt="JHUB Africa">
            <span class="logo-text">JHUB Africa</span>
        </div>
        
        <div class="nav-links">
            <a href="courses.html">Courses</a>
            <a href="dashboard.html">Dashboard</a>
            <a href="leaderboard.html">Leaderboard</a>
            <a href="rewards.html">Rewards</a>
            <a href="profile.html">Profile</a>
        </div>
        
        <div class="user-menu">
            <div class="user-avatar">JS</div>
        </div>
    </nav>
    
    <!-- Dashboard Layout -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="my-courses.html"><i class="fas fa-book-open"></i> My Courses</a></li>
                <li><a href="achievements.html"><i class="fas fa-trophy"></i> Achievements</a></li>
                <li><a href="points.html"><i class="fas fa-coins"></i> Points Wallet</a></li>
                <li><a href="referrals.html"><i class="fas fa-user-plus"></i> Refer Friends</a></li>
                <li><a href="settings.html" class="active"><i class="fas fa-cog"></i> Settings</a></li>
                <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Settings Header -->
            <div class="settings-header">
                <h1>Account Settings</h1>
            </div>
            
            <!-- Settings Tabs -->
            <div class="settings-tabs">
                <div class="settings-tab active" data-tab="profile">Profile</div>
                <div class="settings-tab" data-tab="security">Security</div>
                <div class="settings-tab" data-tab="notifications">Notifications</div>
                <div class="settings-tab" data-tab="privacy">Privacy</div>
                <div class="settings-tab" data-tab="billing">Billing</div>
            </div>
            
            <!-- Profile Settings -->
            <div class="settings-section" id="profile-tab">
                <h2 class="section-title"><i class="fas fa-user"></i> Profile Information</h2>
                
                <div class="avatar-upload">
                    <div class="avatar-preview">
                        <img src="images/avatar-placeholder.jpg" alt="User Avatar" id="avatarPreview">
                    </div>
                    <div class="avatar-upload-actions">
                        <button class="btn btn-outline btn-sm" id="uploadAvatarBtn">
                            <i class="fas fa-upload"></i> Upload New Photo
                        </button>
                        <button class="btn btn-outline btn-sm" id="removeAvatarBtn">
                            <i class="fas fa-trash"></i> Remove Photo
                        </button>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" value="Jane">
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" value="Student">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" value="jane.student@example.com">
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" value="+254712345678">
                </div>
                
                <div class="form-group">
                    <label for="bio">Bio</label>
                    <textarea id="bio" rows="4">Digital skills enthusiast currently learning web development and digital marketing through JHUB Africa.</textarea>
                </div>
                
                <button class="btn btn-primary">Save Changes</button>
            </div>
            
            <!-- Security Settings (Hidden by default) -->
            <div class="settings-section" id="security-tab" style="display: none;">
                <h2 class="section-title"><i class="fas fa-shield-alt"></i> Security Settings</h2>
                
                <div class="form-group">
                    <label>Password</label>
                    <p class="device-meta">Last changed 3 months ago</p>
                    <button class="btn btn-outline" id="changePasswordBtn">
                        Change Password
                    </button>
                </div>
                
                <div id="passwordForm" style="display: none;">
                    <div class="form-group">
                        <label for="currentPassword">Current Password</label>
                        <input type="password" id="currentPassword">
                    </div>
                    
                    <div class="form-group">
                        <label for="newPassword">New Password</label>
                        <input type="password" id="newPassword">
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword">Confirm New Password</label>
                        <input type="password" id="confirmPassword">
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary">Update Password</button>
                        <button class="btn btn-outline" id="cancelPasswordBtn">Cancel</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Two-Factor Authentication</label>
                    <p class="device-meta">Add an extra layer of security to your account</p>
                    <div class="checkbox-group">
                        <input type="checkbox" id="enable2FA">
                        <label for="enable2FA">Enable Two-Factor Authentication</label>
                    </div>
                </div>
                
                <h3 class="section-title"><i class="fas fa-laptop"></i> Active Devices</h3>
                
                <div class="security-device current-device">
                    <div class="device-info">
                        <div class="device-icon">
                            <i class="fas fa-laptop"></i>
                        </div>
                        <div>
                            <h4>MacBook Pro</h4>
                            <p class="device-meta">Safari • Nairobi, Kenya (Current)</p>
                            <p class="device-meta">Last active: Just now</p>
                        </div>
                    </div>
                    <button class="btn btn-outline btn-sm">Log Out</button>
                </div>
                
                <div class="security-device">
                    <div class="device-info">
                        <div class="device-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div>
                            <h4>iPhone 12</h4>
                            <p class="device-meta">Chrome • Nairobi, Kenya</p>
                            <p class="device-meta">Last active: 2 days ago</p>
                        </div>
                    </div>
                    <button class="btn btn-outline btn-sm">Log Out</button>
                </div>
                
                <button class="btn btn-danger">
                    <i class="fas fa-sign-out-alt"></i> Log Out of All Devices
                </button>
            </div>
            
            <!-- Notification Settings (Hidden by default) -->
            <div class="settings-section" id="notifications-tab" style="display: none;">
                <h2 class="section-title"><i class="fas fa-bell"></i> Notification Preferences</h2>
                
                <div class="form-group">
                    <label>Email Notifications</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="courseUpdates" checked>
                        <label for="courseUpdates">Course updates and announcements</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="promotional" checked>
                        <label for="promotional">Promotional offers and newsletters</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="accountActivity" checked>
                        <label for="accountActivity">Account activity and security</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Push Notifications</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="newCourses" checked>
                        <label for="newCourses">New courses and learning opportunities</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="deadlineReminders" checked>
                        <label for="deadlineReminders">Assignment deadline reminders</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="pointsEarned" checked>
                        <label for="pointsEarned">Points earned and rewards</label>
                    </div>
                </div>
                
                <button class="btn btn-primary">Save Preferences</button>
            </div>
            
            <!-- Privacy Settings (Hidden by default) -->
            <div class="settings-section" id="privacy-tab" style="display: none;">
                <h2 class="section-title"><i class="fas fa-lock"></i> Privacy Settings</h2>
                
                <div class="form-group">
                    <label>Profile Visibility</label>
                    <div class="checkbox-group">
                        <input type="radio" id="visibilityPublic" name="visibility" checked>
                        <label for="visibilityPublic">Public - Anyone can see my profile and achievements</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="radio" id="visibilityPrivate" name="visibility">
                        <label for="visibilityPrivate">Private - Only I can see my profile</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Data Sharing</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="shareAnalytics" checked>
                        <label for="shareAnalytics">Share anonymous usage data to help improve JHUB Africa</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="partnerOffers">
                        <label for="partnerOffers">Receive offers from our education partners</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Data Export</label>
                    <p class="device-meta">Request a copy of all your personal data stored by JHUB Africa</p>
                    <button class="btn btn-outline">
                        <i class="fas fa-download"></i> Request Data Export
                    </button>
                </div>
                
                <div class="form-group">
                    <label>Account Deletion</label>
                    <p class="device-meta">Permanently delete your account and all associated data</p>
                    <button class="btn btn-danger">
                        <i class="fas fa-trash"></i> Delete Account
                    </button>
                </div>
            </div>
            
            <!-- Billing Settings (Hidden by default) -->
            <div class="settings-section" id="billing-tab" style="display: none;">
                <h2 class="section-title"><i class="fas fa-credit-card"></i> Billing Information</h2>
                
                <div class="form-group">
                    <label>Payment Methods</label>
                    <div class="security-device">
                        <div class="device-info">
                            <div class="device-icon">
                                <i class="fab fa-cc-visa"></i>
                            </div>
                            <div>
                                <h4>Visa •••• 4242</h4>
                                <p class="device-meta">Expires 04/2025</p>
                            </div>
                        </div>
                        <button class="btn btn-outline btn-sm">Remove</button>
                    </div>
                    
                    <button class="btn btn-outline">
                        <i class="fas fa-plus"></i> Add Payment Method
                    </button>
                </div>
                
                <div class="form-group">
                    <label>Billing History</label>
                    <p class="device-meta">View and download your past invoices</p>
                    <button class="btn btn-outline">
                        <i class="fas fa-file-invoice"></i> View Billing History
                    </button>
                </div>
                
                <div class="form-group">
                    <label>Redeem Points</label>
                    <p class="device-meta">You have 1,250 points available (KES 1,250)</p>
                    <button class="btn btn-primary">
                        <i class="fas fa-coins"></i> Redeem Points
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching functionality
            const tabs = document.querySelectorAll('.settings-tab');
            const tabContents = document.querySelectorAll('.settings-section');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Hide all tab contents
                    tabContents.forEach(content => {
                        content.style.display = 'none';
                    });
                    
                    // Show the selected tab content
                    const tabId = tab.getAttribute('data-tab') + '-tab';
                    document.getElementById(tabId).style.display = 'block';
                });
            });
            
            // Password form toggle
            const changePasswordBtn = document.getElementById('changePasswordBtn');
            const cancelPasswordBtn = document.getElementById('cancelPasswordBtn');
            const passwordForm = document.getElementById('passwordForm');
            
            if (changePasswordBtn) {
                changePasswordBtn.addEventListener('click', () => {
                    passwordForm.style.display = 'block';
                });
            }
            
            if (cancelPasswordBtn) {
                cancelPasswordBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    passwordForm.style.display = 'none';
                });
            }
            
            // Avatar upload simulation
            const uploadAvatarBtn = document.getElementById('uploadAvatarBtn');
            const removeAvatarBtn = document.getElementById('removeAvatarBtn');
            const avatarPreview = document.getElementById('avatarPreview');
            
            if (uploadAvatarBtn) {
                uploadAvatarBtn.addEventListener('click', () => {
                    // In a real app, this would open a file dialog
                    // For demo, we'll just simulate a successful upload
                    avatarPreview.src = 'https://randomuser.me/api/portraits/women/44.jpg';
                    
                    // Show success message
                    alert('Profile photo updated successfully!');
                });
            }
            
            if (removeAvatarBtn) {
                removeAvatarBtn.addEventListener('click', () => {
                    avatarPreview.src = 'images/avatar-placeholder.jpg';
                    alert('Profile photo removed. A default avatar will be shown.');
                });
            }
            
            // Logout functionality
            document.getElementById('logoutBtn').addEventListener('click', function(e) {
                e.preventDefault();
                
                // In a real app, this would call your logout API
                // and clear the authentication token
                localStorage.removeItem('authToken');
                window.location.href = 'login.html';
            });
            
            // Load user data from API (mock implementation)
            function loadUserData() {
                // In a real app, you would:
                // 1. Get auth token from localStorage
                // 2. Make API request to /api/user/settings
                // 3. Update the UI with real data
                
                // Mock data for demo
                const userData = {
                    firstName: "Jane",
                    lastName: "Student",
                    email: "jane.student@example.com",
                    phone: "+254712345678",
                    bio: "Digital skills enthusiast currently learning web development and digital marketing through JHUB Africa.",
                    avatar: "images/avatar-placeholder.jpg",
                    notifications: {
                        email: {
                            courseUpdates: true,
                            promotional: true,
                            accountActivity: true
                        },
                        push: {
                            newCourses: true,
                            deadlineReminders: true,
                            pointsEarned: true
                        }
                    },
                    privacy: {
                        visibility: "public",
                        shareAnalytics: true,
                        partnerOffers: false
                    }
                };
                
                // Update form fields with user data
                document.getElementById('firstName').value = userData.firstName;
                document.getElementById('lastName').value = userData.lastName;
                document.getElementById('email').value = userData.email;
                document.getElementById('phone').value = userData.phone;
                document.getElementById('bio').value = userData.bio;
                avatarPreview.src = userData.avatar;
                
                // Update notification preferences
                document.getElementById('courseUpdates').checked = userData.notifications.email.courseUpdates;
                document.getElementById('promotional').checked = userData.notifications.email.promotional;
                document.getElementById('accountActivity').checked = userData.notifications.email.accountActivity;
                document.getElementById('newCourses').checked = userData.notifications.push.newCourses;
                document.getElementById('deadlineReminders').checked = userData.notifications.push.deadlineReminders;
                document.getElementById('pointsEarned').checked = userData.notifications.push.pointsEarned;
                
                // Update privacy settings
                if (userData.privacy.visibility === "public") {
                    document.getElementById('visibilityPublic').checked = true;
                } else {
                    document.getElementById('visibilityPrivate').checked = true;
                }
                
                document.getElementById('shareAnalytics').checked = userData.privacy.shareAnalytics;
                document.getElementById('partnerOffers').checked = userData.privacy.partnerOffers;
                
                // Update avatar initials
                const initials = userData.firstName[0] + userData.lastName[0];
                document.querySelector('.user-avatar').textContent = initials;
            }
            
            loadUserData();
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const token = localStorage.getItem('authToken');

            if (!token) {
                window.location.href = 'login.html';
                return;
            }

            // Fetch user settings from backend
            fetch('http://localhost:5000/api/user/settings', {
                headers: {
                    'Authorization': 'Bearer ' + token
                }
            })
            .then(res => {
                if (!res.ok) throw new Error('Failed to load settings');
                return res.json();
            })
            .then(data => {
                // Update UI with real data
                console.log('User settings:', data);
                // You would update the form fields here with the actual data
            })
            .catch(err => {
                console.error('Error loading settings:', err);
                // Show error message to user
            });

            // Logout functionality
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function (e) {
                    e.preventDefault();
                    localStorage.removeItem('authToken');
                    window.location.href = 'login.html';
                });
            }
        });
    </script>
   
<script src="/js/apiConnector.js"></script>
<script>
  (async function() {
    try {
      // Password change handler
      document.getElementById('change-password').addEventListener('submit', async (e) => {
        e.preventDefault();
        const current = document.getElementById('current-password').value;
        const newPass = document.getElementById('new-password').value;
        
        await JHubAPI.changePassword(current, newPass);
        alert('Password changed successfully!');
        e.target.reset();
      });
      
      // Notification preferences
      document.getElementById('notifications-form').addEventListener('change', async (e) => {
        const updates = {
          emailNotifications: document.getElementById('email-notifications').checked,
          pushNotifications: document.getElementById('push-notifications').checked
        };
        await JHubAPI.updateNotificationPrefs(updates);
      });
      
    } catch (error) {
      document.getElementById('settings-error').textContent = error.message;
    }
  })();
</script>
</body>
</html>